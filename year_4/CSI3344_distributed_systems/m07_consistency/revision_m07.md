# Workshop

## Q1

>The statement of causal consistency is:  
>- Writes that are potentially casually related must be seen by all processes in the same order
>   - Concurrent writes may be seen in a different order on different machines
>- Given four processes P1, P2, P3 and P4, and their following 5 execution sequences, explain which sequence is causally consistent, and which one is not

![q1a](https://snag.gy/to80rf.jpg)

```
a -> b -> c
```

- P4 is causally consistent.


![q1b](https://snag.gy/bGqdyB.jpg)

```
a -> c
```

- P3 is causally consistent
- P4 is causally consistent

![q1c](https://snag.gy/y9Mrzo.jpg)

```
a -> b
```

- P4 is causally consistent

![q1d](https://snag.gy/vbwsUR.jpg)

```
a -> b
```

- P3 is causally consistent
- P4 is causally consistent

![q1e](https://snag.gy/RhsiY9.jpg)

```
a || b
```

- P3 is causally consistent
- P4 is causally consistent

## Q2

>Consider the example given in lecture slide No.15: Although slide No.16 listed 4 possible execution sequences, there exist many other possible valid execution sequences for this example.

![q2a](https://snag.gy/1wWRJ0.jpg)

![q2b](https://snag.gy/pFsvWq.jpg)

>List 4 other valid execution sequences, and their corresponding sequences of Prints and Signatures for the example.

```
x = 0, y = 0, z = 0
```

### 1

```
x = 1
y = 1
z = 1
print(x, z) 11 P2
print(x, y) 11 P3
print(y, z) 11 P1

pr 11 11 11
sg 11 11 11
```

### 2

```
x
print(x, z) 10 P2
print(x, y) 10 P3
y
z
print(y, z) 11 P1

pr 10 10 11
sg 11 10 10
```

### 3

```
z
print(y, z) 01 P1
x
print(x, z) 11 P2
y
print(y, z) 11 P3

pr 01 11 11
sg 01 11 11
```

### 4

```
z
x
print(y, z) 00 P3
y
print(x, z) 11 P2
print(y, z) 11 P1

pr 00 11 11
sg 11 11 00
```

# Review

## Q1

>What is the purpose of data replication?

- Increase reliability
- Increase performance

## Q2

>What are the two major processes on data?

- Read
- Write

## Q3

>Explain why a write operation must leave a value to the data item after its operation finishes.

A write must leave a value to the data item in order to change that data item. Otherwise it might as well not perform the write operation at all.

## Q4

>Explain why a read operation is not required to leave a value to the data item it viewed.

A read does not need to leave a value to the data item it viewed, since it is only required to determine what the value is, not change it.

## Q5

>What is actually a consistency model?

A contract between processes and data stores to ensure an expected degree of consistency between replicas.

## Q6

>In the Necessary Condition of the strict consistency, which statement implies the need of a global physical clock for this model?

Absolute time ordering.

## Q7

>Describe the necessary conditions for sequential, causal, and FIFO consistency models, respectively.

### Sequential

- Not ordered in time
- When any processes run concurrently on different machines, any interleaving of read/write is acceptable
- All processes must see the same interleaving order

### Causal

- Writes that are causally related must be seen by all processes in the same order
- Concurrent writes may be seen in different orders on different machines

### FIFO

- Writes by a single process are seen by all other processes in the same order
- Writes from different processes may be seen in different orders, by different processes
- All writes generated by different processes are concurrent

## Q8

>In the first and second examples for causal consistency below, what actually differentiates them from each other?

![example 1](https://snag.gy/JdHjQN.jpg)

Example 1:

`a -> b` since P2 reads `a` before writing `b`.

![example 2](https://snag.gy/y9hwN1.jpg)

Example 2:

No links between reads and writes, no causal relationship.